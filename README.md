# :dress: ì˜¤ëŠ˜ì˜ ì˜·ì°¨ë¦¼ ê°€ì´ë“œ | ì˜¤ëŠ˜ ë­ ì…ì§€?

![ì œëª©ì„ ì…ë ¥í•˜ì„¸ìš” 7](https://github.com/user-attachments/assets/5189e4ea-e239-4a82-8abb-a8a3679446ff)


## ğŸ’ í”„ë¡œì íŠ¸ ì†Œê°œ

'ì˜¤ëŠ˜ ë­ ì…ì§€?'ëŠ” ë‚ ì”¨ì— ì í•©í•œ ì˜·ì°¨ë¦¼ì„ ê³ ë¯¼í•˜ëŠ” ì‚¬ëŒë“¤ì„ ìœ„í•œ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ìœ¼ë¡œ, íŠ¹íˆ ë‚ ì”¨ ë³€í™”ê°€ ì¦ì€ ê°„ì ˆê¸°ì— ìœ ìš©í•˜ê²Œ ì“¸ ìˆ˜ ìˆë„ë¡ ê°œë°œí•˜ì˜€ìŠµë‹ˆë‹¤. ì‚¬ìš©ìëŠ” ì˜¤ëŠ˜ì˜ ì˜·ì°¨ë¦¼, ì§€ì—­ê³¼ í•¨ê»˜ ê°„ë‹¨í•œ ë¦¬ë·°ë¥¼ ë‚¨ê¸¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê·¸ë¦¬ê³  ë‹¤ë¥¸ ì‚¬ìš©ìê°€ ê³µìœ í•œ ë¦¬ë·°ë¥¼ ì°¸ê³ í•´ ì˜¤ëŠ˜ì˜ ì˜·ì°¨ë¦¼ì„ ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. 


* URL : https://whattowear.store/
* Test ID : guest@gmail.com
* Test PW : 123123 
* Blog : https://beginnerdevdiary.tistory.com/

  
## â° ê°œë°œ ê¸°ê°„

2024.07 ~ 2024.11


## âš™ï¸ ê°œë°œ í™˜ê²½

- ì–¸ì–´ : Java21, JavaScript, HTML/css
- ì„œë²„ : Amazon EC2, Docker
- í”„ë ˆì„ì›Œí¬ : Spring Boot, Vue.js, Spring Security
- ë°ì´í„°ë² ì´ìŠ¤ : MariaDB, Amazon RDS
- API/ë¼ì´ë¸ŒëŸ¬ë¦¬ : ê¸°ìƒì²­ API, JWT


## ğŸ” ERD

![ìŠ¤í¬ë¦°ìƒ· 2024-12-05 212618](https://github.com/user-attachments/assets/d825a75c-02d6-4cbf-906f-43e9822e9bc6)


## ğŸš€ íŠ¸ëŸ¬ë¸” ìŠˆíŒ…

* ë¬¸ì œ ìƒí™© ë°œìƒ

  
  Spring Securityì™€ JWTë¥¼ ì‚¬ìš©í•˜ì—¬ ì‚¬ìš©ì ì¸ì¦ì„ êµ¬í˜„í•˜ëŠ” ê³¼ì •ì—ì„œ Access í† í° ë§Œë£Œ ì²˜ë¦¬ì™€ ì¬ë°œê¸‰ ë¡œì§ ì„¤ê³„ì— ì–´ë ¤ì›€ì´ ìˆì—ˆìŠµë‹ˆë‹¤. ë§Œë£Œëœ Access í† í°ìœ¼ë¡œ API ìš”ì²­ì„ ë³´ë‚¼ ê²½ìš° 401 ì—ëŸ¬ê°€ ë°œìƒí–ˆìœ¼ë©°, Axios Interceptorë¥¼ í†µí•´ ìë™ìœ¼ë¡œ ì¬ë°œê¸‰ ìš”ì²­ì„ ë³´ë‚´ë„ë¡ ì„¤ê³„í–ˆì§€ë§Œ ì¬ë°œê¸‰ ìš”ì²­ì¡°ì°¨ JWT í•„í„°ì—ì„œ 401 ì—ëŸ¬ë¡œ ì²˜ë¦¬ë˜ì–´ ë¬´í•œ ë£¨í”„ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.

* ì›ì¸ ì¶”ë¡ 


  ë¬¸ì œì˜ ì›ì¸ì€ Spring Securityì˜ JWT í•„í„°ê°€ ëª¨ë“  ìš”ì²­ì— ëŒ€í•´ í† í° ìœ íš¨ì„±ì„ ê²€ì‚¬í•˜ë„ë¡ ì„¤ì •ë˜ì–´ ìˆì—ˆê¸° ë•Œë¬¸ì…ë‹ˆë‹¤. ì´ë¡œ ì¸í•´ ì¬ë°œê¸‰ API ìš”ì²­ì¡°ì°¨ í† í° ê²€ì¦ ëŒ€ìƒì— í¬í•¨ë˜ì—ˆê³ , ë§Œë£Œëœ í† í°ìœ¼ë¡œ ë³´ë‚¸ ì¬ë°œê¸‰ ìš”ì²­ì´ ê³„ì† ì‹¤íŒ¨í•˜ëŠ” ìƒí™©ì´ ë°œìƒí–ˆìŠµë‹ˆë‹¤.

* í•´ê²° ë°©ì•ˆ


  JWT í•„í„°ì—ì„œ ì¬ë°œê¸‰ API ê²½ë¡œë¥¼ ì˜ˆì™¸ ì²˜ë¦¬í•˜ì—¬ í•´ë‹¹ ê²½ë¡œì— ëŒ€í•´ì„œ í† í° ê²€ì¦ì„ ìƒëµí•˜ë„ë¡ ì„¤ê³„í•˜ì˜€ìŠµë‹ˆë‹¤. ì´ë¥¼ í†µí•´ ì¬ë°œê¸‰ ìš”ì²­ì´ JWT ê²€ì¦ ì—†ì´ ë‹¤ìŒ í•„í„°ë¡œ ë„˜ì–´ê°ˆ ìˆ˜ ìˆê²Œ ë˜ì—ˆê³  ê²°ê³¼ì ìœ¼ë¡œ ë§Œë£Œëœ í† í° ìƒí™©ì—ì„œë„ ì¬ë°œê¸‰ ë¡œì§ì´ ì •ìƒì ìœ¼ë¡œ ì‘ë™í•˜ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.
```
//  Axios Interceptor
//  401 ì—ëŸ¬ && ì¬ì‹œë„ê°€ ì•„ë‹Œ ê²½ìš° --> í† í° ì¬ë°œê¸‰ ìš”ì²­
if (status === 401 && !originalRequest._retry) {
  originalRequest._retry = true;

  try {
    const reissueResponse = await axios.post(`/api/main/reissue`);

    (ìƒëµ)
  }
  catch {
    (ìƒëµ)
  }
}
```
```
//  JWT í•„í„°
//  ìš”ì²­ URLê°€ "/api/main/reissue"ì¸ ê²½ìš° --> ë‹¤ìŒ í•„í„°ë¡œ ë„˜ê¹€
String requestURI = request.getRequestURI();

if ("/api/main/reissue".equals(requestURI)) {

  filterChain.doFilter(request, response);

  return;
}
```
* ê²°ê³¼


  í† í°ì´ ë§Œë£Œëœ ìƒí™©ì—ì„œë„ ì•ˆì •ì ìœ¼ë¡œ í† í° ì¬ë°œê¸‰ì´ ê°€ëŠ¥í•´ì¡ŒìŠµë‹ˆë‹¤. ì´ ê³¼ì •ì—ì„œ JWT ê¸°ë°˜ ì¸ì¦ì˜ ì‘ë™ ì›ë¦¬ì™€ Spring Security í•„í„° ì²´ì¸ ì„¤ê³„ì— ëŒ€í•´ ë³´ë‹¤ ê¹Šì´ ì´í•´í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.


## ğŸ“‹ í”„ë¡œì íŠ¸ êµ¬ì¡°

```
//  Backend
â”‚  
â”œâ”€config
â”‚      CacheConfig.java
â”‚      CorsMvcConfig.java
â”‚      SecurityConfig.java
â”‚      WebConfig.java
â”‚      
â”œâ”€controller
â”‚      AccountController.java
â”‚      AdminController.java
â”‚      ItemController.java
â”‚      MyPageController.java
â”‚      OutfitController.java
â”‚      ReissueController.java
â”‚      SignUpController.java
â”‚      WeatherController.java
â”‚      
â”œâ”€dto
â”‚      ChangeInfoDto.java
â”‚      CustomUserDetails.java
â”‚      ItemDto.java
â”‚      MemberDto.java
â”‚      MemberInfoDto.java
â”‚      OrderDto.java
â”‚      OutfitDto.java
â”‚      SearchKeywordDto.java
â”‚      WeatherDto.java
â”‚      WithdrawMemberDto.java
â”‚      
â”œâ”€entity
â”‚      Item.java
â”‚      Member.java
â”‚      Outfit.java
â”‚      Refresh.java
â”‚      
â”œâ”€jwt
â”‚      CustomLogoutFilter.java
â”‚      JWTFilter.java
â”‚      JWTUtil.java
â”‚      LoginFilter.java
â”‚      
â”œâ”€repository
â”‚      AdminRepository.java
â”‚      ItemRepository.java
â”‚   ë¡|
|---|---|---|
|![Image](https://github.com/user-attachments/assets/69fe5a52-f0f2-41e9-91d0-37c1b6639e56)|![Image](https://github.com/user-attachments/assets/2ecdad15-0d2d-4b7d-ae4e-ff0f37ea0cec)|![Image](https://github.com/user-attachments/assets/f90eccfb-c071-4b19-82dc-304d40026345)|
